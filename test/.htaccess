# Enable RewriteEngine
RewriteEngine On

# Set the base for rewrites
RewriteBase /test/

# Disable LiteSpeed cache entirely for test environment
<IfModule LiteSpeed>
CacheLookup off
</IfModule>

# Prevent caching of index.html (SPA entry point)
<FilesMatch "^index\.html$">
  Header set Cache-Control "no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires "0"
</FilesMatch>

# Serve static files directly (bypass SPA routing)
RewriteRule \.(css|js|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|json|php|xml|webp|mp4|pdf)$ - [L]

# Marketplace clean URLs
RewriteRule ^marketplace/publicar/?$ /test/marketplace.html [L]
RewriteRule ^marketplace/?$ /test/marketplace.html [L]
RewriteRule ^marketplace\.html$ - [L]

# Serve static SEO pages directly
RewriteRule ^pages/ - [L]

# Serve asset subdirectories directly
RewriteRule ^assets/ - [L]

# Serve API directory directly
RewriteRule ^api/ - [L]

# If the requested file or directory exists, serve it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Otherwise, redirect all requests to index.html for SPA routing
RewriteRule ^ index.html [L]
